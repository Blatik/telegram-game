<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ Financial Calculator Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: #fff;
            min-height: 100vh;
            padding: 15px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .screen {
            display: none;
            animation: slideIn 0.3s ease;
        }

        .screen.active {
            display: block;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .header {
            text-align: center;
            margin-bottom: 25px;
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .header p {
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .back-btn {
            background: none;
            border: none;
            color: #74b9ff;
            font-size: 1rem;
            cursor: pointer;
            margin-bottom: 15px;
            padding: 5px 0;
        }

        .tool-grid {
            display: grid;
            gap: 15px;
            grid-template-columns: repeat(2, 1fr);
        }

        .tool-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .tool-card:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.15);
        }

        .tool-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .tool-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .tool-desc {
            font-size: 0.75rem;
            opacity: 0.8;
            line-height: 1.3;
        }

        .form-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 14px;
        }

        .btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(45deg, #95a5a6, #7f8c8d);
            color: white;
            margin-top: 10px;
        }

        .btn-secondary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(149, 165, 166, 0.3);
        }

        .result-card {
            background: rgba(46, 204, 113, 0.1);
            border: 1px solid rgba(46, 204, 113, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .result-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #00b894;
            margin-bottom: 10px;
        }

        .result-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00b894;
            margin-bottom: 5px;
        }

        .result-desc {
            font-size: 0.85rem;
            opacity: 0.9;
            line-height: 1.4;
        }

        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .comparison-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }

        .breakdown-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .breakdown-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #74b9ff;
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- –ì–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω -->
        <div id="home" class="screen active">
            <div class="header">
                <h1>üí∞ Financial Calculator Pro</h1>
                <p>–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω—ñ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏</p>
            </div>

            <div class="tool-grid">
                <div class="tool-card" onclick="showScreen('hourly-income')">
                    <div class="tool-icon">‚è∞</div>
                    <div class="tool-title">–ü–æ–≥–æ–¥–∏–Ω–Ω–∏–π –¥–æ—Ö—ñ–¥</div>
                    <div class="tool-desc">–†–µ–∞–ª—å–Ω–∏–π –¥–æ—Ö—ñ–¥ –∑–∞ –≥–æ–¥–∏–Ω—É</div>
                </div>

                <div class="tool-card" onclick="showScreen('time-value')">
                    <div class="tool-icon">üíé</div>
                    <div class="tool-title">–í–∞—Ä—Ç—ñ—Å—Ç—å —á–∞—Å—É</div>
                    <div class="tool-desc">–°–∫—ñ–ª—å–∫–∏ –∫–æ—à—Ç—É—î –≤–∞—à–∞ –≥–æ–¥–∏–Ω–∞</div>
                </div>

                <div class="tool-card" onclick="showScreen('credit-calc')">
                    <div class="tool-icon">üè¶</div>
                    <div class="tool-title">–ö—Ä–µ–¥–∏—Ç–Ω–∏–π –∞–Ω–∞–ª—ñ–∑</div>
                    <div class="tool-desc">–î–æ—Ü—ñ–ª—å–Ω—ñ—Å—Ç—å –∫—Ä–µ–¥–∏—Ç—É</div>
                </div>

                <div class="tool-card" onclick="showScreen('buy-rent')">
                    <div class="tool-icon">üè†</div>
                    <div class="tool-title">–ö—É–ø—ñ–≤–ª—è vs –û—Ä–µ–Ω–¥–∞</div>
                    <div class="tool-desc">–©–æ –≤–∏–≥—ñ–¥–Ω—ñ—à–µ</div>
                </div>

                <div class="tool-card" onclick="showScreen('investment-calc')">
                    <div class="tool-icon">üìà</div>
                    <div class="tool-title">–Ü–Ω–≤–µ—Å—Ç–∏—Ü—ñ—ó</div>
                    <div class="tool-desc">–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è –∫–∞–ø—ñ—Ç–∞–ª—É</div>
                </div>

                <div class="tool-card" onclick="showScreen('retirement-calc')">
                    <div class="tool-icon">üèñ</div>
                    <div class="tool-title">–ü–µ–Ω—Å—ñ–π–Ω–∏–π –ø–ª–∞–Ω</div>
                    <div class="tool-desc">–ù–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –Ω–∞ –º–∞–π–±—É—Ç–Ω—î</div>
                </div>

                <div class="tool-card" onclick="showScreen('emergency-fund')">
                    <div class="tool-icon">üõ°</div>
                    <div class="tool-title">–§—ñ–Ω–ø–æ–¥—É—à–∫–∞</div>
                    <div class="tool-desc">–†–µ–∑–µ—Ä–≤–Ω–∏–π —Ñ–æ–Ω–¥</div>
                </div>

                <div class="tool-card" onclick="showScreen('tax-calc')">
                    <div class="tool-icon">üìä</div>
                    <div class="tool-title">–ü–æ–¥–∞—Ç–∫–∏</div>
                    <div class="tool-desc">–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥–∞—Ç–∫—ñ–≤</div>
                </div>
            </div>
        </div>

        <!-- Real Hourly Income Calculator -->
        <div id="hourly-income" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>‚è∞ Real Hourly Income</h1>
                <p>–†–µ–∞–ª—å–Ω–∏–π –¥–æ—Ö—ñ–¥ –∑–∞ –≥–æ–¥–∏–Ω—É –∂–∏—Ç—Ç—è</p>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–í–∞–ª—é—Ç–∞</label>
                    <select id="hourly-currency">
                        <option value="EUR">‚Ç¨ –Ñ–≤—Ä–æ</option>
                        <option value="USD">$ –î–æ–ª–∞—Ä –°–®–ê</option>
                        <option value="UAH">‚Ç¥ –ì—Ä–∏–≤–Ω—è</option>
                        <option value="BTC">‚Çø –ë—ñ—Ç–∫–æ—ñ–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ú—ñ—Å—è—á–Ω–∏–π –¥–æ—Ö—ñ–¥</label>
                    <input type="number" id="monthly-income" placeholder="3000" value="3000">
                </div>
                <div class="form-group">
                    <label>–ü–æ–¥–∞—Ç–∫–∏ (%)</label>
                    <input type="number" id="taxes" placeholder="20" value="20">
                </div>
                <div class="form-group">
                    <label>–†–æ–±–æ—á—ñ –≥–æ–¥–∏–Ω–∏ –Ω–∞ –º—ñ—Å—è—Ü—å</label>
                    <input type="number" id="work-hours" placeholder="160" value="160">
                </div>
                <div class="form-group">
                    <label>–ß–∞—Å –¥–æ—Ä–æ–≥–∏ (–≥–æ–¥/–º—ñ—Å)</label>
                    <input type="number" id="commute-time" placeholder="40" value="40">
                </div>
                <div class="form-group">
                    <label>–í–∏—Ç—Ä–∞—Ç–∏ –Ω–∞ —Ä–æ–±–æ—Ç—É</label>
                    <input type="number" id="work-expenses" placeholder="200" value="200">
                </div>
                <button class="btn btn-primary" onclick="calculateHourlyIncome()">
                    –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏
                </button>
            </div>

            <div id="hourly-result"></div>
        </div>

        <!-- Time Value Calculator -->
        <div id="time-value" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>üíé Time Value</h1>
                <p>–ì—Ä–æ—à–æ–≤–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å –≤–∞—à–æ–≥–æ —á–∞—Å—É</p>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–í–∞–ª—é—Ç–∞</label>
                    <select id="time-currency">
                        <option value="EUR">‚Ç¨ –Ñ–≤—Ä–æ</option>
                        <option value="USD">$ –î–æ–ª–∞—Ä –°–®–ê</option>
                        <option value="UAH">‚Ç¥ –ì—Ä–∏–≤–Ω—è</option>
                        <option value="BTC">‚Çø –ë—ñ—Ç–∫–æ—ñ–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–†—ñ—á–Ω–∏–π —á–∏—Å—Ç–∏–π –¥–æ—Ö—ñ–¥</label>
                    <input type="number" id="annual-income" placeholder="36000" value="36000">
                </div>
                <div class="form-group">
                    <label>–†–µ–∞–ª—å–Ω—ñ —Ä–æ–±–æ—á—ñ –≥–æ–¥–∏–Ω–∏ –Ω–∞ —Ä—ñ–∫</label>
                    <input type="number" id="annual-hours" placeholder="2000" value="2000">
                </div>
                <button class="btn btn-primary" onclick="calculateTimeValue()">
                    –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏
                </button>
            </div>

            <div id="time-result"></div>
        </div>

        <!-- Credit Decision Calculator -->
        <div id="credit-calc" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>üè¶ Credit Decision</h1>
                <p>–î–æ—Ü—ñ–ª—å–Ω—ñ—Å—Ç—å –∫—Ä–µ–¥–∏—Ç—É</p>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–í–∞–ª—é—Ç–∞</label>
                    <select id="credit-currency">
                        <option value="EUR">‚Ç¨ –Ñ–≤—Ä–æ</option>
                        <option value="USD">$ –î–æ–ª–∞—Ä –°–®–ê</option>
                        <option value="UAH">‚Ç¥ –ì—Ä–∏–≤–Ω—è</option>
                        <option value="BTC">‚Çø –ë—ñ—Ç–∫–æ—ñ–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–°—É–º–∞ –∫—Ä–µ–¥–∏—Ç—É</label>
                    <input type="number" id="credit-amount" placeholder="10000" value="10000">
                </div>
                <div class="form-group">
                    <label>–í—ñ–¥—Å–æ—Ç–∫–æ–≤–∞ —Å—Ç–∞–≤–∫–∞ (%)</label>
                    <input type="number" id="interest-rate" placeholder="8" step="0.1" value="8">
                </div>
                <div class="form-group">
                    <label>–¢–µ—Ä–º—ñ–Ω (—Ä–æ–∫—ñ–≤)</label>
                    <input type="number" id="credit-term" placeholder="5" value="5">
                </div>
                <div class="form-group">
                    <label>–Ü–Ω—Ñ–ª—è—Ü—ñ—è (% –Ω–∞ —Ä—ñ–∫)</label>
                    <input type="number" id="inflation" placeholder="3" step="0.1" value="3">
                </div>
                <div class="form-group">
                    <label>–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –¥–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å (% –Ω–∞ —Ä—ñ–∫)</label>
                    <input type="number" id="alternative-return" placeholder="6" step="0.1" value="6">
                </div>
                <button class="btn btn-primary" onclick="calculateCredit()">
                    –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏
                </button>
            </div>

            <div id="credit-result"></div>
        </div>

        <!-- Buy vs Rent Calculator -->
        <div id="buy-rent" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>üè† –û—Ä–µ–Ω–¥–∞ —á–∏ –ö—É–ø—ñ–≤–ª—è</h1>
                <p>–ê–Ω–∞–ª—ñ–∑ –≤–∏–≥–æ–¥–∏ –≤–æ–ª–æ–¥—ñ–Ω–Ω—è –∂–∏—Ç–ª–æ–º</p>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–í–∞–ª—é—Ç–∞</label>
                    <select id="buy-rent-currency">
                        <option value="EUR">‚Ç¨ –Ñ–≤—Ä–æ</option>
                        <option value="USD">$ –î–æ–ª–∞—Ä –°–®–ê</option>
                        <option value="UAH">‚Ç¥ –ì—Ä–∏–≤–Ω—è</option>
                        <option value="BTC">‚Çø –ë—ñ—Ç–∫–æ—ó–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–í–∞—Ä—Ç—ñ—Å—Ç—å –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ</label>
                    <input type="number" id="property-price" placeholder="200000" value="200000">
                </div>
                <div class="form-group">
                    <label>–ü–æ—á–∞—Ç–∫–æ–≤–∏–π –≤–Ω–µ—Å–æ–∫</label>
                    <input type="number" id="down-payment" placeholder="40000" value="40000">
                </div>
                <div class="form-group">
                    <label>–°—Ç–∞–≤–∫–∞ —ñ–ø–æ—Ç–µ–∫–∏ (%)</label>
                    <input type="number" id="mortgage-rate" placeholder="4" step="0.1" value="4">
                </div>
                <div class="form-group">
                    <label>–¢–µ—Ä–º—ñ–Ω —ñ–ø–æ—Ç–µ–∫–∏ (—Ä–æ–∫—ñ–≤)</label>
                    <input type="number" id="mortgage-term" placeholder="20" value="20">
                </div>
                <div class="form-group">
                    <label>–ú—ñ—Å—è—á–Ω–∞ –æ—Ä–µ–Ω–¥–∞</label>
                    <input type="number" id="monthly-rent" placeholder="800" value="800">
                </div>
                <div class="form-group">
                    <label>–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è –æ—Ä–µ–Ω–¥–∏ (% –Ω–∞ —Ä—ñ–∫)</label>
                    <input type="number" id="rent-growth" placeholder="3" step="0.1" value="3">
                </div>
                <div class="form-group">
                    <label>–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è –≤–∞—Ä—Ç–æ—Å—Ç—ñ –∂–∏—Ç–ª–∞ (%)</label>
                    <input type="number" id="property-growth" placeholder="2" step="0.1" value="2">
                </div>
                <div class="form-group">
                    <label>–ì–æ—Ä–∏–∑–æ–Ω—Ç –ø–ª–∞–Ω—É–≤–∞–Ω–Ω—è (—Ä–æ–∫—ñ–≤)</label>
                    <input type="number" id="planning-horizon" placeholder="10" value="10">
                </div>
                <button class="btn btn-primary" onclick="calculateBuyVsRent()">
                    –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏
                </button>
            </div>

            <div id="buy-rent-result"></div>
        </div>

        <!-- Investment Growth Calculator -->
        <div id="investment-calc" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>üìà Investment Growth</h1>
                <p>–ó—Ä–æ—Å—Ç–∞–Ω–Ω—è —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ–π</p>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–í–∞–ª—é—Ç–∞</label>
                    <select id="investment-currency">
                        <option value="EUR">‚Ç¨ –Ñ–≤—Ä–æ</option>
                        <option value="USD">$ –î–æ–ª–∞—Ä –°–®–ê</option>
                        <option value="UAH">‚Ç¥ –ì—Ä–∏–≤–Ω—è</option>
                        <option value="BTC">‚Çø –ë—ñ—Ç–∫–æ—ñ–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ü–æ—á–∞—Ç–∫–æ–≤–∞ —Å—É–º–∞</label>
                    <input type="number" id="initial-amount" placeholder="10000" value="10000">
                </div>
                <div class="form-group">
                    <label>–©–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫</label>
                    <input type="number" id="monthly-contribution" placeholder="500" value="500">
                </div>
                <div class="form-group">
                    <label>–†—ñ—á–Ω–∞ –¥–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å (%)</label>
                    <input type="number" id="annual-return" placeholder="7" step="0.1" value="7">
                </div>
                <div class="form-group">
                    <label>–ü–µ—Ä—ñ–æ–¥ —ñ–Ω–≤–µ—Å—Ç—É–≤–∞–Ω–Ω—è (—Ä–æ–∫—ñ–≤)</label>
                    <input type="number" id="investment-period" placeholder="10" value="10">
                </div>
                <button class="btn btn-primary" onclick="calculateInvestment()">
                    –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏
                </button>
            </div>

            <div id="investment-result"></div>
        </div>

        <!-- Retirement Calculator -->
        <div id="retirement-calc" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>üèù –ü–µ–Ω—Å—ñ–π–Ω–∏–π –ø–ª–∞–Ω</h1>
                <p>–ù–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –Ω–∞ –º–∞–π–±—É—Ç–Ω—î</p>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–í–∞–ª—é—Ç–∞</label>
                    <select id="retirement-currency">
                        <option value="EUR">‚Ç¨ –Ñ–≤—Ä–æ</option>
                        <option value="USD">$ –î–æ–ª–∞—Ä –°–®–ê</option>
                        <option value="UAH">‚Ç¥ –ì—Ä–∏–≤–Ω—è</option>
                        <option value="BTC">‚Çø –ë—ñ—Ç–∫–æ—ó–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ü–æ—Ç–æ—á–Ω–∏–π –≤—ñ–∫</label>
                    <input type="number" id="current-age" placeholder="30" value="30">
                </div>
                <div class="form-group">
                    <label>–í—ñ–∫ –≤–∏—Ö–æ–¥—É –Ω–∞ –ø–µ–Ω—Å—ñ—é</label>
                    <input type="number" id="retirement-age" placeholder="65" value="65">
                </div>
                <div class="form-group">
                    <label>–ë–∞–∂–∞–Ω–∏–π –¥–æ—Ö—ñ–¥ –Ω–∞ –º—ñ—Å—è—Ü—å</label>
                    <input type="number" id="desired-income" placeholder="2000" value="2000">
                </div>
                <div class="form-group">
                    <label>–ü–æ—Ç–æ—á–Ω—ñ –∑–∞–æ—â–∞–¥–∂–µ–Ω–Ω—è</label>
                    <input type="number" id="current-savings" placeholder="50000" value="50000">
                </div>
                <div class="form-group">
                    <label>–û—á—ñ–∫—É–≤–∞–Ω–∞ –¥–æ—Ö—ñ–¥–Ω—ñ—Å—Ç—å (%)</label>
                    <input type="number" id="expected-return" placeholder="6" step="0.1" value="6">
                </div>
                <button class="btn btn-primary" onclick="calculateRetirement()">
                    –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏
                </button>
            </div>

            <div id="retirement-result"></div>
        </div>

        <!-- Debt Payoff Calculator -->
        <div id="debt-payoff" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>üí≥ –ü–æ–≥–∞—à–µ–Ω–Ω—è –±–æ—Ä–≥—É</h1>
                <p>–°—Ç—Ä–∞—Ç–µ–≥—ñ—è –≤–∏—Ö–æ–¥—É –∑ –±–æ—Ä–≥—ñ–≤</p>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–í–∞–ª—é—Ç–∞</label>
                    <select id="debt-currency">
                        <option value="EUR">‚Ç¨ –Ñ–≤—Ä–æ</option>
                        <option value="USD">$ –î–æ–ª–∞—Ä –°–®–ê</option>
                        <option value="UAH">‚Ç¥ –ì—Ä–∏–≤–Ω—è</option>
                        <option value="BTC">‚Çø –ë—ñ—Ç–∫–æ—ó–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–°—É–º–∞ –±–æ—Ä–≥—É</label>
                    <input type="number" id="total-debt" placeholder="10000" value="10000">
                </div>
                <div class="form-group">
                    <label>–í—ñ–¥—Å–æ—Ç–∫–æ–≤–∞ —Å—Ç–∞–≤–∫–∞ (%)</label>
                    <input type="number" id="debt-rate" placeholder="15" step="0.1" value="15">
                </div>
                <div class="form-group">
                    <label>–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –ø–ª–∞—Ç—ñ–∂</label>
                    <input type="number" id="minimum-payment" placeholder="300" value="300">
                </div>
                <div class="form-group">
                    <label>–î–æ–¥–∞—Ç–∫–æ–≤–∏–π –ø–ª–∞—Ç—ñ–∂</label>
                    <input type="number" id="extra-payment" placeholder="200" value="200">
                </div>
                <button class="btn btn-primary" onclick="calculateDebtPayoff()">
                    –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏
                </button>
            </div>

            <div id="debt-result"></div>
        </div>

        <!-- Emergency Fund Calculator -->
        <div id="emergency-fund" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>üõ° –§—ñ–Ω–∞–Ω—Å–æ–≤–∞ –ø–æ–¥—É—à–∫–∞</h1>
                <p>–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ —Ñ–æ–Ω–¥—É</p>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–í–∞–ª—é—Ç–∞</label>
                    <select id="emergency-currency">
                        <option value="EUR">‚Ç¨ –Ñ–≤—Ä–æ</option>
                        <option value="USD">$ –î–æ–ª–∞—Ä –°–®–ê</option>
                        <option value="UAH">‚Ç¥ –ì—Ä–∏–≤–Ω—è</option>
                        <option value="BTC">‚Çø –ë—ñ—Ç–∫–æ—ó–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ú—ñ—Å—è—á–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏</label>
                    <input type="number" id="monthly-expenses" placeholder="1000" value="1000">
                </div>
                <div class="form-group">
                    <label>–ó–∞–ø–∞—Å (–º—ñ—Å—è—Ü—ñ–≤)</label>
                    <input type="number" id="months-coverage" placeholder="6" value="6">
                </div>
                <div class="form-group">
                    <label>–ü–æ—Ç–æ—á–Ω—ñ –∑–∞–æ—â–∞–¥–∂–µ–Ω–Ω—è</label>
                    <input type="number" id="curr-savings" placeholder="2000" value="2000">
                </div>
                <div class="form-group">
                    <label>–©–æ–º—ñ—Å—è—á–Ω–µ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è</label>
                    <input type="number" id="monthly-contrib" placeholder="200" value="200">
                </div>
                <button class="btn btn-primary" onclick="calculateEmergencyFund()">
                    –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏
                </button>
            </div>
            <div id="emergency-result"></div>
        </div>

        <!-- Tax Calculator -->
        <div id="tax-calc" class="screen">
            <button class="back-btn" onclick="showScreen('home')">‚Üê –ù–∞–∑–∞–¥</button>
            <div class="header">
                <h1>üìä Tax Calculator</h1>
                <p>–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥–∞—Ç–∫—ñ–≤</p>
            </div>

            <div class="form-card">
                <div class="form-group">
                    <label>–í–∞–ª—é—Ç–∞</label>
                    <select id="tax-currency">
                        <option value="EUR">‚Ç¨ –Ñ–≤—Ä–æ</option>
                        <option value="USD">$ –î–æ–ª–∞—Ä –°–®–ê</option>
                        <option value="UAH">‚Ç¥ –ì—Ä–∏–≤–Ω—è</option>
                        <option value="BTC">‚Çø –ë—ñ—Ç–∫–æ—ó–Ω</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–†—ñ—á–Ω–∏–π –¥–æ—Ö—ñ–¥</label>
                    <input type="number" id="tax-income" placeholder="50000" value="50000">
                </div>
                <div class="form-group">
                    <label>–ü–æ–¥–∞—Ç–æ–∫ (%)</label>
                    <input type="number" id="tax-rate" placeholder="19.5" step="0.1" value="19.5">
                </div>
                <button class="btn btn-primary" onclick="calculateTax()">
                    –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏
                </button>
            </div>
            <div id="tax-result"></div>
        </div>
    </div>

    <script>
        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Telegram WebApp
        if (window.Telegram?.WebApp) {
            const tg = window.Telegram.WebApp;
            tg.ready();
            tg.expand();
        }

        // Update this URL after deploying your backend to your VPS
        const API_BASE_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
            ? 'http://localhost:8787'
            : 'https://backend-rust.blatik-short.workers.dev';

        async function callAPI(endpoint, data) {
            const response = await fetch(`${API_BASE_URL}${endpoint}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            if (!response.ok) throw new Error('API Error');
            return await response.json();
        }

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        // Global chart instances storage
        window.chartInstances = {};

        function renderResult(containerId, result, data, reportEndpoint, reportFilename) {
            const container = document.getElementById(containerId);
            let metricsHtml = '';
            let chartConfig = null;

            // Define metrics and chart config based on endpoint
            if (reportEndpoint === '/calculate/hourly-income/report') {
                metricsHtml = `
                    <div class="result-value">${result.currency_symbol}${result.real_hourly_income}/–≥–æ–¥</div>
                    <div class="result-desc">–ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å: ${result.efficiency}% <br> (–ù–æ–º—ñ–Ω–∞–ª—å–Ω–æ: ${result.currency_symbol}${result.nominal_hourly_income})</div>
                `;
                chartConfig = {
                    type: 'bar',
                    labels: ['–ù–æ–º—ñ–Ω–∞–ª—å–Ω–∞', '–†–µ–∞–ª—å–Ω–∞'],
                    data: [result.nominal_hourly_income, result.real_hourly_income],
                    colors: ['#95a5a6', '#2ecc71'],
                    label: '–°—Ç–∞–≤–∫–∞ –∑–∞ –≥–æ–¥–∏–Ω—É'
                };
            } else if (reportEndpoint === '/calculate/time-value/report') {
                metricsHtml = `<div class="result-value">${result.currency_symbol}${result.time_value}/–≥–æ–¥</div>`;
                // No chart for simple time value or maybe a gauge later
            } else if (reportEndpoint === '/calculate/investment/report') {
                metricsHtml = `
                    <div class="result-value">${result.currency_symbol}${result.future_value.toLocaleString()}</div>
                    <div class="result-desc">ROI: ${result.roi}%</div>
                `;
                chartConfig = {
                    type: 'doughnut',
                    labels: ['–í–∫–ª–∞–¥–µ–Ω–æ', '–ü—Ä–∏–±—É—Ç–æ–∫'],
                    data: [result.total_contributions, result.total_gain],
                    colors: ['#3498db', '#2ecc71'],
                    label: '–ü–æ—Ä—Ç—Ñ–µ–ª—å'
                };
            } else if (reportEndpoint === '/calculate/credit/report') {
                metricsHtml = `
                    <div class="result-value">${result.currency_symbol}${result.monthly_payment.toLocaleString()}/–º—ñ—Å</div>
                    <div class="result-desc">–ü–µ—Ä–µ–ø–ª–∞—Ç–∞: ${result.currency_symbol}${result.overpayment.toLocaleString()}</div>
                `;
                chartConfig = {
                    type: 'pie',
                    labels: ['–¢—ñ–ª–æ –∫—Ä–µ–¥–∏—Ç—É', '–í—ñ–¥—Å–æ—Ç–∫–∏'],
                    data: [result.total_payment - result.overpayment, result.overpayment],
                    colors: ['#34495e', '#e74c3c'],
                    label: '–í–∞—Ä—Ç—ñ—Å—Ç—å –∫—Ä–µ–¥–∏—Ç—É'
                };
            } else if (reportEndpoint === '/calculate/buy-rent/report') {
                metricsHtml = `
                    <div class="result-value">${result.recommendation === 'buy' ? 'üè† –ö–£–ü–£–í–ê–¢–ò' : 'üè† –û–†–ï–ù–î–£–í–ê–¢–ò'}</div>
                    <div class="result-desc">–í–∏–≥–æ–¥–∞: ${result.currency_symbol}${Math.abs(result.net_buy_position - result.net_rent_position).toLocaleString()}</div>
                `;
                chartConfig = {
                    type: 'bar',
                    labels: ['–ö—É–ø—ñ–≤–ª—è (–ö–∞–ø—ñ—Ç–∞–ª)', '–û—Ä–µ–Ω–¥–∞ (–ö–∞–ø—ñ—Ç–∞–ª)'],
                    data: [result.net_buy_position, result.net_rent_position],
                    colors: ['#2980b9', '#f39c12'],
                    label: '–ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∫–∞–ø—ñ—Ç–∞–ª—É'
                };
            } else if (reportEndpoint === '/calculate/retirement/report') {
                metricsHtml = `
                    <div class="result-value">${result.currency_symbol}${result.future_value.toLocaleString()}</div>
                    <div class="result-desc">–î–µ—Ñ—ñ—Ü–∏—Ç: ${result.currency_symbol}${result.gap.toLocaleString()}</div>
                `;
                chartConfig = {
                    type: 'bar',
                    labels: ['–ù–∞–∫–æ–ø–∏—á–µ–Ω–æ', '–ù–µ–æ–±—Ö—ñ–¥–Ω–æ'],
                    data: [result.future_value, result.required_capital],
                    colors: ['#27ae60', '#c0392b'],
                    label: '–ü–µ–Ω—Å—ñ–π–Ω–∏–π –ø–ª–∞–Ω'
                };
            } else if (reportEndpoint === '/calculate/debt-payoff/report') {
                metricsHtml = `
                    <div class="result-value">${result.months} –º—ñ—Å.</div>
                    <div class="result-desc">–í—Å—å–æ–≥–æ: ${result.currency_symbol}${result.total_paid.toLocaleString()}</div>
                `;
                chartConfig = {
                    type: 'doughnut',
                    labels: ['–ë–æ—Ä–≥', '–í—ñ–¥—Å–æ—Ç–∫–∏'],
                    data: [result.total_paid - result.total_interest, result.total_interest],
                    colors: ['#8e44ad', '#e74c3c'],
                    label: '–í–∏–ø–ª–∞—Ç–∞'
                };
            } else if (reportEndpoint === '/calculate/emergency-fund/report') {
                metricsHtml = `
                    <div class="result-value">${result.currency_symbol}${result.target_amount.toLocaleString()}</div>
                    <div class="result-desc">–ó–∞–ª–∏—à–∏–ª–æ—Å—å: ${result.currency_symbol}${result.remaining_amount.toLocaleString()}</div>
                `;
                chartConfig = {
                    type: 'bar',
                    labels: ['–ü–æ—Ç–æ—á–Ω—ñ', '–¶—ñ–ª—å'],
                    data: [result.target_amount - result.remaining_amount, result.target_amount],
                    colors: ['#16a085', '#f1c40f'],
                    label: '–ü—Ä–æ–≥—Ä–µ—Å'
                };
            } else if (reportEndpoint === '/calculate/tax/report') {
                metricsHtml = `
                    <div class="result-value">${result.currency_symbol}${result.net_income.toLocaleString()}</div>
                    <div class="result-desc">–°—Ç–∞–≤–∫–∞: ${result.effective_rate}% <br> –ü–æ–¥–∞—Ç–æ–∫: ${result.currency_symbol}${result.tax_amount.toLocaleString()}</div>
                `;
                chartConfig = {
                    type: 'pie',
                    labels: ['–ß–∏—Å—Ç–∏–π –¥–æ—Ö—ñ–¥', '–ü–æ–¥–∞—Ç–æ–∫'],
                    data: [result.net_income, result.tax_amount],
                    colors: ['#2ecc71', '#e74c3c'],
                    label: '–†–æ–∑–ø–æ–¥—ñ–ª'
                };
            }

            // Store data globally
            const dataKey = 'lastCalcData_' + containerId;
            window[dataKey] = data;

            // HTML Structure
            container.innerHTML = `
                <div class="result-card">
                    <div class="result-title">–†–µ–∑—É–ª—å—Ç–∞—Ç</div>
                    ${metricsHtml}
                </div>
                <div class="breakdown-item">
                    ${chartConfig ? `<div style="position: relative; height:300px; width:100%;"><canvas id="chart_${containerId}"></canvas></div>` : ''}
                </div>
            `;

            // Initialize Chart if config exists
            if (chartConfig) {
                const ctx = document.getElementById(`chart_${containerId}`).getContext('2d');

                // Destroy previous instance if exists
                if (window.chartInstances[containerId]) {
                    window.chartInstances[containerId].destroy();
                }

                window.chartInstances[containerId] = new Chart(ctx, {
                    type: chartConfig.type,
                    data: {
                        labels: chartConfig.labels,
                        datasets: [{
                            label: chartConfig.label,
                            data: chartConfig.data,
                            backgroundColor: chartConfig.colors,
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom', labels: { color: 'white' } },
                            tooltip: {
                                enabled: true,
                                callbacks: {
                                    label: function (context) {
                                        let label = context.dataset.label || '';
                                        if (label) { label += ': '; }
                                        if (context.parsed.y !== null) {
                                            label += result.currency_symbol + context.parsed.y.toLocaleString();
                                        } else if (context.parsed !== null) {
                                            label += result.currency_symbol + context.parsed.toLocaleString();
                                        }
                                        return label;
                                    }
                                }
                            }
                        },
                        scales: chartConfig.type === 'bar' ? {
                            y: { ticks: { color: 'white' }, grid: { color: 'rgba(255,255,255,0.1)' } },
                            x: { ticks: { color: 'white' }, grid: { display: false } }
                        } : {}
                    }
                });
            }
        }

        async function calculateHourlyIncome() {
            const data = {
                monthly_income: parseFloat(document.getElementById('monthly-income').value),
                taxes: parseFloat(document.getElementById('taxes').value),
                work_hours: parseFloat(document.getElementById('work-hours').value),
                commute_time: parseFloat(document.getElementById('commute-time').value),
                work_expenses: parseFloat(document.getElementById('work-expenses').value),
                currency: document.getElementById('hourly-currency').value
            };
            try {
                const res = await callAPI('/calculate/hourly-income', data);
                renderResult('hourly-result', res, data, '/calculate/hourly-income/report', 'hourly_income');
            } catch (e) { alert('–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É'); }
        }

        async function calculateTimeValue() {
            const data = {
                annual_income: parseFloat(document.getElementById('annual-income').value),
                annual_hours: parseFloat(document.getElementById('annual-hours').value),
                currency: document.getElementById('time-currency').value
            };
            try {
                const res = await callAPI('/calculate/time-value', data);
                renderResult('time-result', res, data, '/calculate/time-value/report', 'time_value');
            } catch (e) { alert('–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É'); }
        }

        async function calculateInvestment() {
            const data = {
                initial_amount: parseFloat(document.getElementById('initial-amount').value),
                monthly_contribution: parseFloat(document.getElementById('monthly-contribution').value),
                annual_return: parseFloat(document.getElementById('annual-return').value),
                period: parseFloat(document.getElementById('investment-period').value),
                currency: document.getElementById('investment-currency').value
            };
            try {
                const res = await callAPI('/calculate/investment', data);
                renderResult('investment-result', res, data, '/calculate/investment/report', 'investment');
            } catch (e) { alert('–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É'); }
        }

        async function calculateCredit() {
            const data = {
                amount: parseFloat(document.getElementById('credit-amount').value),
                rate: parseFloat(document.getElementById('interest-rate').value),
                term: parseFloat(document.getElementById('credit-term').value),
                inflation: parseFloat(document.getElementById('inflation').value),
                alternative_return: parseFloat(document.getElementById('alternative-return').value),
                currency: document.getElementById('credit-currency').value
            };
            try {
                const res = await callAPI('/calculate/credit', data);
                renderResult('credit-result', res, data, '/calculate/credit/report', 'credit');
            } catch (e) { alert('–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É'); }
        }

        async function calculateBuyVsRent() {
            const data = {
                property_price: parseFloat(document.getElementById('property-price').value),
                down_payment: parseFloat(document.getElementById('down-payment').value),
                mortgage_rate: parseFloat(document.getElementById('mortgage-rate').value),
                mortgage_term: parseFloat(document.getElementById('mortgage-term').value),
                monthly_rent: parseFloat(document.getElementById('monthly-rent').value),
                rent_growth: parseFloat(document.getElementById('rent-growth').value),
                property_growth: parseFloat(document.getElementById('property-growth').value),
                horizon: parseFloat(document.getElementById('planning-horizon').value),
                currency: document.getElementById('buy-rent-currency').value
            };
            try {
                const res = await callAPI('/calculate/buy-rent', data);
                renderResult('buy-rent-result', res, data, '/calculate/buy-rent/report', 'buy_rent');
            } catch (e) { alert('–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É'); }
        }

        async function calculateRetirement() {
            const data = {
                current_age: parseFloat(document.getElementById('current-age').value),
                retirement_age: parseFloat(document.getElementById('retirement-age').value),
                desired_income: parseFloat(document.getElementById('desired-income').value),
                current_savings: parseFloat(document.getElementById('current-savings').value),
                expected_return: parseFloat(document.getElementById('expected-return').value),
                monthly_savings: 0,
                currency: document.getElementById('retirement-currency').value
            };
            try {
                const res = await callAPI('/calculate/retirement', data);
                renderResult('retirement-result', res, data, '/calculate/retirement/report', 'retirement');
            } catch (e) { alert('–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É'); }
        }

        async function calculateDebtPayoff() {
            const data = {
                balance: parseFloat(document.getElementById('total-debt').value),
                interest_rate: parseFloat(document.getElementById('debt-rate').value),
                monthly_payment: parseFloat(document.getElementById('minimum-payment').value),
                extra_payment: parseFloat(document.getElementById('extra-payment').value),
                currency: document.getElementById('debt-currency').value
            };
            try {
                const res = await callAPI('/calculate/debt-payoff', data);
                renderResult('debt-result', res, data, '/calculate/debt-payoff/report', 'debt_payoff');
            } catch (e) { alert('–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É'); }
        }

        async function calculateEmergencyFund() {
            const data = {
                monthly_expenses: parseFloat(document.getElementById('monthly-expenses').value),
                months_coverage: parseFloat(document.getElementById('months-coverage').value),
                current_savings: parseFloat(document.getElementById('curr-savings').value),
                monthly_contribution: parseFloat(document.getElementById('monthly-contrib').value),
                currency: document.getElementById('emergency-currency').value
            };
            try {
                const res = await callAPI('/calculate/emergency-fund', data);
                renderResult('emergency-result', res, data, '/calculate/emergency-fund/report', 'emergency_fund');
            } catch (e) { alert('–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É'); }
        }

        async function calculateTax() {
            const data = {
                income: parseFloat(document.getElementById('tax-income').value),
                tax_rate: parseFloat(document.getElementById('tax-rate').value),
                currency: document.getElementById('tax-currency').value
            };
            try {
                const res = await callAPI('/calculate/tax', data);
                renderResult('tax-result', res, data, '/calculate/tax/report', 'tax_analysis');
            } catch (e) { alert('–ü–æ–º–∏–ª–∫–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É'); }
        }
    </script>
</body>

</html>